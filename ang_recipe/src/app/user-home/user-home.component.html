<div *ngIf="recipe" class="container my-4 p-4 bg-light rounded shadow-sm">
  <h2 class="mb-3">{{ recipe.title }}</h2>
  <img *ngIf="recipe.image" [src]="'http://127.0.0.1:8000' + recipe.image" class="img-fluid rounded mb-3" style="max-width: 300px;" />
  <p><strong>Creator:</strong> {{ recipe.username }}</p>
  <p><strong>Time:</strong> {{ recipe.total_time }} mins</p>
  <p><strong>Cuisine:</strong> {{ recipe.cuisine }}</p>
  <p><strong>Category:</strong> {{ recipe.category }}</p>
  <p><strong>Ingredients:</strong></p>
  <pre class="bg-white p-3 rounded border">{{ recipe.ingredients }}</pre>
  <p><strong>Instructions:</strong></p>
  <pre class="bg-white p-3 rounded border">{{ recipe.instructions }}</pre>

  <hr>
  <form [formGroup]="reviewForm" (ngSubmit)="submitReview()" class="mb-4">
    <div class="mb-3">
      <label for="rating" class="form-label">Rating (1-5)</label>
      <input formControlName="rating" type="number" min="1" max="5" id="rating" class="form-control" required/>
    </div>

    <div class="mb-3">
      <label for="comment" class="form-label">Comment</label>
      <textarea formControlName="comment" id="comment" rows="3" class="form-control" required></textarea>            
    </div>

    <button type="submit" class="btn btn-primary">Submit Review</button>
  </form>

  <hr>
  <h3>Reviews</h3>
  <div *ngIf="recipe.reviews?.length > 0; else noReviews">
    <div *ngFor="let review of recipe.reviews" class="mb-3 p-3 border rounded bg-white shadow-sm">
      <p class="mb-1"><strong>{{ review.username }}</strong> rated <span class="text-warning">{{ review.ratings }} ⭐</span></p>
      <p class="mb-0">{{ review.comments }}</p>
    </div>
  </div>

  <ng-template #noReviews>
    <p class="text-muted">No reviews yet.</p>
  </ng-template>
  <button type="button" class="btn btn-outline-primary mb-3" routerLink="/main-view">← Back</button>                                                          
</div>
